<?php
session_start();

?>
    <!DOCTYPE html>
    <html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Account</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    </head>

    <body style="background-color:rgb(255, 239, 236)">


        <section>
            <div class="container">

                <div class="row">
                    <div class="col-sm-4"></div>
                    <div class="col-sm-4" style="background-color: white;padding-top:2%;padding-left:4%;padding-right:4%;padding-bottom:10%;margin-top:7%;">
                        <h3 style="text-align:center">Sign In</h3>
                        <form action=" " name="myForm" onclick="return validateForm()" method="get" style="margin-top:5%">
                            <div class="formdesign" id="name">
                                <lable style="font-size:110%;">
                                    Username
                                </lable> <input type="text" id="username" name="fname" style="width:100%;height:10%;border-radius:5px;border:1px solid rgb(179, 175, 175);margin-top:1%;" required><span class="formerror" style="color:red"> </span>
                            </div>



                            <div class="formdesign" id="pass" style="margin-top:4%">
                                <lable style="font-size:110%;">
                                    Password
                                </lable>
                                <br>

                                <input type="password" id="password" name="fpass" style="width:100%;height:10%;border-radius:5px;border:1px solid rgb(193, 193, 193);margin-top:1% " required><span class="formerror" style="margin-top: -1%;color:red"></span>

                            </div>

                            <input type="checkbox" id="checkbox" style="margin-top:4%;" required><span style="margin-left:2%;font-size:90%">Remeber me</span>

                            <a href="" style="text-decoration:none;margin-left:5%;margin-top:3%;">Forgot Password</a>
                            <input class="but" onclick="show()" type="submit" name="submit" value="Log In" style="color:white;width:100%;height:10%;border-radius:5px;border:1px solid rgb(140, 136, 214);background: rgb(141, 141, 216);margin-bottom:5px;margin-top:5%;">

                        </form>

                        <p style="text-align:center">&mdash;or&mdash;</p>

                        <a href="index.html"><button style="background-color: rgb(35, 154, 35);color:white;border:none;border-radius:5px;width:100%;height:10%;">Create Account</button></a>

                    </div>
                    <div class="col-sm-4"></div>
                </div>
        </section>


        <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js "></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js "></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js "></script>
        <script>
            function show() {



                var username = document.getElementById("username").value;

                var password = document.getElementById("password").value;



                var api = "https://1z4jtf74tl.execute-api.us-east-1.amazonaws.com/get/gapi"

                var Key = {
                    "username": username,

                    "password": password

                };

                var xhr = new XMLHttpRequest();
                xhr.onload = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        alert(xhr.responseText);

                    }
                };
                if (document.getElementById('checkbox').checked) {
                    xhr.open("GET", api, true);
                    var a = xhr.send(JSON.stringify(Key));
                    if (a !== Key) {
                        document.getElementById("username").value = '';
                        document.getElementById("pass").value = '';
                        window.location = "index (2).html";
                    } else {
                        alert('Incorrect Username or Password!')
                    }

                }
            }
        </script>
    </body>
    <script src="index.js" rel="stylesheet"></script>

    </html>